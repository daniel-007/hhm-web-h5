!function(){function e(e,r,i){$.ajax({type:"POST",url:e,data:r,timeout:15e3,success:function(e,r,t){e.status?i(null,e):i(e.msg,null)},error:function(r,t,s){console.error(e+" error: "+t+"##"+s),i("服务异常",null)}})}require.config({baseUrl:"../js",paths:{Vue:"./lib/vue.min",Utils:"./lib/utils"},shim:{Vue:{exports:"Vue"},Utils:{exports:"Utils"}}}),require(["Vue","Utils"],function(r,i){"use strict";r.config.delimiters=["${","}"],r.config.unsafeDelimiters=["{!!","!!}"],$(document).on("pageInit","#page-address-select",function(e,i,t){new r({el:"#page-address-select",data:{}})}),$(document).on("pageInit","#page-address-edit",function(t,s,a){var c=void 0;if("/address/modify"===location.pathname){var n=i.getSearch(location);if(!n.id)return void(location.pathname="/");var o=parseInt(n.id);e("/address/get-all-receiver",{receiverId:o},function(e,i){e?$.toast(e,1e3):(c=new r({el:"#page-address-edit",data:{receiverId:i.receiver.SysNo,phone:i.receiver.ReceiverPhone,receiver:i.receiver.ReceiverName,pcdDes:i.receiver.Province+" "+i.receiver.City+" "+i.receiver.District,address:i.receiver.Address,isDefault:i.receiver.IsDefault}}),$("#city-picker").cityPicker({toolbarTemplate:'<header class="bar bar-nav"><button class="button button-link pull-right close-picker">              确定</button><h1 class="title">选择收货地址</h1></header>'})),$.hidePreloader()}),$.showPreloader("请稍等")}else c=new r({el:"#page-address-edit",data:{receiverId:0,phone:"",receiver:"",pcdDes:"浙江省 嘉兴市 南湖区",address:"",isDefault:!1}}),$("#city-picker").cityPicker({toolbarTemplate:'<header class="bar bar-nav"><button class="button button-link pull-right close-picker">          确定</button><h1 class="title">选择收货地址</h1></header>'});$(a).on("click",".button",function(r){r.preventDefault();var i="/address/modify-receiver";0===c.receiverId&&(i="/address/add-receiver"),e(i,{receiverId:c.receiverId,phone:c.phone,receiver:c.receiver,pcdDes:c.pcdDes,address:c.address,isDefault:c.isDefault},function(e,r){$.hidePreloader(),e?$.toast(e,1e3):window.history.back()}),$.showPreloader("保存中")})}),$.init()})}();