!function(){function t(t,o,e){$.ajax({type:"POST",url:t,data:o,timeout:15e3,success:function(t,o,n){t.status?e(null,t):e(t.msg,null)},error:function(o,n,c){console.error(t+" error: "+n+"##"+c),e("服务异常",null)}})}function o(o,e,n,c){var a={};return a.url=o,a.cid=n,a.childId=c,a.pageSize=e,a.pageId=0,a.addItems=function(o){var e=this;t(this.url,{CId:a.cid,ChildCId:a.childId,pageId:this.pageId,pageSize:this.pageSize},function(t,n){t?o(t,null):(e.pageId++,o(null,n))})},a}require.config({baseUrl:"../js",paths:{Vue:"./lib/vue.min",Utils:"./lib/utils"},shim:{Vue:{exports:"Vue"},Utils:{exports:"Utils"}}}),require(["Vue","Utils"],function(e,n){"use strict";e.config.delimiters=["${","}"],e.config.unsafeDelimiters=["{!!","!!}"],$(document).on("pageInit","#page-product-class",function(o,n,c){var a=new e({el:"#page-product-class",data:{categories:[],search:""}});t("/product/class",{},function(t,o){t?$.toast(t,1e3):a.categories=o.category.slice()}),$(c).on("click",".icon-clear",function(){a.search=""})}),$(document).on("pageInit","#page-product-detail",function(t,o,c){var a=new e({el:"#page-product-detail",data:{isLike:!1,cartNum:3},computed:{liked:function(){return this.isLike?"已收藏":"收藏"}}});$(c).on("click",".like",function(){$(this).toggleClass("icon-like"),$(this).toggleClass("icon-likeactive"),a.isLike=!a.isLike}),$(c).on("click",".my-back-top",function(){$(".content").scrollTop(0)});var i=$.photoBrowser({photos:["../images/demo/home-tuijian-1.jpg","../images/demo/home-tuijian-2.jpg","../images/demo/home-tuijian-3.jpg"],type:"popup"});$(c).on("click",".pb-popup",function(){i.open()});var u=new e({el:"#popup-cart",data:{addCartNum:1}});u.$watch("addCartNum",function(t,o){""!==t&&(n.isPositiveNum(t)||($.toast("请输入正确的购买数量",500),e.nextTick(function(){u.addCartNum=o})))}),$(document).on("click",".my-a-cart.close-popup",function(t){return""===u.addCartNum?(u.addCartNum=1,$.toast("请输入正确的购买数量",1e3),void t.preventDefault()):(a.cartNum+=parseInt(u.addCartNum),void(u.addCartNum=1))}),$(document).on("click",".icon-close.close-popup",function(){u.addCartNum=1}),$(document).on("click",".em-op-d",function(){u.addCartNum>1&&u.addCartNum--}),$(document).on("click",".em-op-a",function(){u.addCartNum++}),$(document).on("click",".my-ul-spec li",function(){$(".my-ul-spec li").removeClass("my-spec-on"),$(this).addClass("my-spec-on")}),$(function(){$(".swiper-container").swiper({spaceBetween:30,continuous:!0,autoplay:2500,autoplayDisableOnInteraction:!1})})}),$(document).on("pageInit","#page-product-group-detail",function(t,o,c){var a=new e({el:"#page-product-group-detail",data:{isLike:!1,cartNum:3},computed:{liked:function(){return this.isLike?"已收藏":"收藏"}}});$(c).on("click",".like",function(){$(this).toggleClass("icon-like"),$(this).toggleClass("icon-likeactive"),a.isLike=!a.isLike}),$(c).on("click",".my-back-top",function(){$(".content").scrollTop(0)});var i=new e({el:"#popup-cart",data:{addCartNum:1}});i.$watch("addCartNum",function(t,o){""!==t&&(n.isPositiveNum(t)||($.toast("请输入正确的购买数量",500),e.nextTick(function(){i.addCartNum=o})))}),$(document).on("click",".my-a-cart.close-popup",function(){return""===i.addCartNum?(i.addCartNum=1,void $.toast("请输入正确的购买数量",1e3)):(a.cartNum+=parseInt(i.addCartNum),void(i.addCartNum=1))}),$(document).on("click",".icon-close.close-popup",function(){i.addCartNum=1}),$(document).on("click",".em-op-d",function(){i.addCartNum>1&&i.addCartNum--}),$(document).on("click",".em-op-a",function(){i.addCartNum++}),$(document).on("click",".my-ul-spec li",function(){$(".my-ul-spec li").removeClass("my-spec-on"),$(this).addClass("my-spec-on")}),$(function(){$(".swiper-container").swiper({spaceBetween:30,continuous:!0,autoplay:2500,autoplayDisableOnInteraction:!1})})}),$(document).on("pageInit","#page-product-list",function(t,c,a){function i(t){$.popup(".popup-cart")}var u=new e({el:"#page-product-list",data:{search:"",products:[],count:0,cartNum:30},methods:{addToCart:i}}),d=void 0,r=!1;if("/product/sales"===location.pathname);else if("/product/new"===location.pathname);else if("/product/group"===location.pathname);else if("/product/recommend"===location.pathname);else if("/product/category"===location.pathname){var s=n.getSearch(location);if(!s.CId||!s.ChildCId)return void(location.pathname="/");d=new o("/product/category",10,parseInt(s.CId),parseInt(s.ChildCId)),d.addItems(function(t,o){t?$.toast(t,1e3):(u.count=o.count,u.products=u.products.concat(o.products))})}$(a).on("infinite",".infinite-scroll-bottom",function(){r||(r=!0,setTimeout(function(){return r=!1,u.products.length>=u.count?($.detachInfiniteScroll($(".infinite-scroll")),void $(".infinite-scroll-preloader").remove()):(d.addItems(function(t,o){t?$.toast(t,1e3):(u.count=o.count,u.products=u.products.concat(o.products))}),void $.refreshScroller())},1e3))}),$(a).on("click",".icon-clear",function(){u.search=""});var l=new e({el:"#popup-cart",data:{addCartNum:1}});l.$watch("addCartNum",function(t,o){""!==t&&(n.isPositiveNum(t)||($.toast("请输入正确的购买数量",500),e.nextTick(function(){l.addCartNum=o})))}),$(document).on("click",".my-a-cart.close-popup",function(t){return t.preventDefault(),""===l.addCartNum?(l.addCartNum=1,void $.toast("请输入正确的购买数量",1e3)):(u.cartNum+=parseInt(l.addCartNum),void(l.addCartNum=1))}),$(document).on("click",".icon-close.close-popup",function(){event.preventDefault(),l.addCartNum=1}),$(document).on("click",".em-op-d",function(){l.addCartNum>1&&l.addCartNum--}),$(document).on("click",".em-op-a",function(){l.addCartNum++}),$(document).on("click",".my-ul-spec li",function(){$(".my-ul-spec li").removeClass("my-spec-on"),$(this).addClass("my-spec-on")})}),$(document).on("pageInit","#page-product-flash-deal-list",function(t,o,n){var c=new e({el:"#page-product-flash-deal-list",data:{search:""}});$(n).on("click",".icon-clear",function(){c.search=""})}),$.init()})}();